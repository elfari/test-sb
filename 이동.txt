<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ExtJS 4.2 TreeGrid 기본 예제</title>
    
    <!-- ExtJS 4.2 CDN -->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/extjs/4.2.1/resources/css/ext-all.css"/>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/extjs/4.2.1/ext-all.js"></script>
    
    <script type="text/javascript">
    Ext.onReady(function() {
        
        // 데이터 모델
        Ext.define('Task', {
            extend: 'Ext.data.Model',
            fields: [
                {name: 'task',     type: 'string'},
                {name: 'duration', type: 'int'},
                {name: 'progress', type: 'float'},
                {name: 'iconCls',  type: 'string'},
                {name: 'leaf',     type: 'boolean', defaultValue: false}
            ]
        });

        // 데이터 저장소 (TreeStore)
        var store = Ext.create('Ext.data.TreeStore', {
            model: 'Task',
            root: {
                expanded: true,
                children: [
                    {
                        task: '프로젝트 준비',
                        duration: 10,
                        progress: 0.6,
                        expanded: true,
                        children: [
                            { task: '요구사항 분석',     duration: 4,  progress: 1.0, leaf: true },
                            { task: '기획서 작성',       duration: 3,  progress: 0.8, leaf: true },
                            { task: '프로젝트 일정 수립', duration: 3,  progress: 0.3, leaf: true }
                        ]
                    },
                    {
                        task: '개발',
                        duration: 25,
                        progress: 0.4,
                        expanded: true,
                        children: [
                            {
                                task: '프론트엔드',
                                duration: 12,
                                progress: 0.5,
                                children: [
                                    { task: 'UI 컴포넌트 개발', duration: 6,  progress: 0.7, leaf: true },
                                    { task: '반응형 디자인',    duration: 6,  progress: 0.3, leaf: true }
                                ]
                            },
                            {
                                task: '백엔드',
                                duration: 13,
                                progress: 0.3,
                                children: [
                                    { task: 'API 개발',      duration: 8,  progress: 0.2, leaf: true },
                                    { task: 'DB 설계',       duration: 5,  progress: 0.5, leaf: true }
                                ]
                            }
                        ]
                    },
                    {
                        task: '테스트 & 배포',
                        duration: 8,
                        progress: 0,
                        leaf: true
                    }
                ]
            }
        });

        // TreeGrid 생성
        Ext.create('Ext.tree.Panel', {
            title: '간단한 프로젝트 진행 TreeGrid',
            width: 680,
            height: 420,
            renderTo: Ext.getBody(),
            margin: '20 0 0 20',
            useArrows: true,
            rootVisible: false,
            store: store,
            multiSelect: true,
            columns: [
                {
                    xtype: 'treecolumn',
                    text: '작업명',
                    dataIndex: 'task',
                    width: 300,
                    sortable: true
                },
                {
                    text: '기간(일)',
                    dataIndex: 'duration',
                    width: 100,
                    align: 'center',
                    sortable: true
                },
                {
                    text: '진행률',
                    dataIndex: 'progress',
                    width: 120,
                    align: 'center',
                    renderer: function(v) {
                        return (v * 100).toFixed(0) + '%';
                    }
                }
            ],
            viewConfig: {
                stripeRows: true,
                enableTextSelection: true
            }
        });

    });
    </script>
</head>
<body>
    <h2 style="margin:20px;">ExtJS 4.2 TreeGrid 간단 예제</h2>
</body>
</html>