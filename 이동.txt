import java.lang.reflect.Field;
import java.lang.reflect.Modifier;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Map;
import java.util.Vector;

public class PrintUtil {

    /**
     * 객체의 모든 멤버 변수(private 포함)를 출력합니다.
     * 상속받은 부모 클래스의 필드까지 재귀적으로 탐색합니다.
     */
    public static void printAllValues(Object obj) {
        if (obj == null) {
            System.out.println("Target object is null.");
            return;
        }

        Class<?> clazz = obj.getClass();
        System.out.println("=== [" + clazz.getSimpleName() + "] Dump Start ===");

        // 부모 클래스까지 탐색하기 위한 루프
        while (clazz != null && clazz != Object.class) {
            System.out.println("-- Declared in: " + clazz.getSimpleName() + " --");
            
            Field[] fields = clazz.getDeclaredFields();
            
            for (Field field : fields) {
                // 1. static 필드(상수)는 제외 (필요 시 주석 처리)
                if (Modifier.isStatic(field.getModifiers())) {
                    continue; 
                }

                try {
                    // 2. private 접근 허용
                    field.setAccessible(true);
                    
                    // 3. 필드명과 값 가져오기
                    String fieldName = field.getName();
                    Object value = field.get(obj);

                    // 4. 포맷팅하여 출력
                    printFormattedValue(fieldName, value);

                } catch (IllegalArgumentException | IllegalAccessException e) {
                    System.out.println(String.format("%-20s : [Access Error]", field.getName()));
                }
            }
            // 상위 클래스로 이동
            clazz = clazz.getSuperclass();
        }
        System.out.println("========================================");
    }

    private static void printFormattedValue(String fieldName, Object value) {
        String displayValue;

        if (value == null) {
            displayValue = "null";
        } else if (value instanceof Map) {
            displayValue = "(Map Size: " + ((Map<?, ?>) value).size() + ") " + value.toString();
        } else if (value instanceof Vector) {
            displayValue = "(Vector Size: " + ((Vector<?>) value).size() + ") " + value.toString();
        } else if (value instanceof List) {
            displayValue = "(List Size: " + ((List<?>) value).size() + ") " + value.toString();
        } else {
            // String, CoreDate, Primitive types 등
            // 길이가 너무 길면 자르는 로직 등을 여기에 추가 가능
            displayValue = value.toString();
        }

        System.out.printf("%-20s : %s%n", fieldName, displayValue);
    }
}
