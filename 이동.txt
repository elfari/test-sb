<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>ExtJS 4.2 Grouped Grid Sample</title>

    <!-- ExtJS 4.2 CSS -->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/extjs/4.2.1/resources/css/ext-all.css">

    <!-- ExtJS 4.2 Core -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/extjs/4.2.1/ext-all.js"></script>

    <script type="text/javascript">
        Ext.onReady(function() {

            // 데이터 스토어 정의 (groupField로 그룹화 지정)
            var employeeStore = Ext.create('Ext.data.Store', {
                storeId: 'employeeStore',
                fields: ['name', 'seniority', 'department'],
                groupField: 'department',  // 이 필드로 그룹화
                data: {
                    employees: [
                        { name: '김철수', seniority: 7, department: '경영' },
                        { name: '이영희', seniority: 2, department: '영업' },
                        { name: '박민수', seniority: 3, department: '영업' },
                        { name: '최지연', seniority: 4, department: '회계' },
                        { name: '정하나', seniority: 5, department: '회계' },
                        { name: '홍길동', seniority: 10, department: '경영' }
                    ]
                },
                proxy: {
                    type: 'memory',
                    reader: {
                        type: 'json',
                        root: 'employees'
                    }
                }
            });

            // 그룹화된 그리드 패널
            Ext.create('Ext.grid.Panel', {
                title: '직원 목록 (부서별 그룹화)',
                store: employeeStore,
                columns: [
                    { text: '이름', dataIndex: 'name', flex: 1 },
                    { text: '근속년수', dataIndex: 'seniority', width: 100 },
                    { text: '부서', dataIndex: 'department', width: 120 }
                ],
                features: [{
                    ftype: 'grouping',
                    groupHeaderTpl: '{name} ({rows.length} 명)',  // 그룹 헤더 템플릿 (그룹명 + 건수)
                    startCollapsed: false   // 처음에 그룹 펼쳐진 상태 (true로 하면 접힌 상태)
                }],
                height: 400,
                width: 600,
                renderTo: Ext.getBody()
            });
        });
    </script>
</head>
<body>
</body>
</html>